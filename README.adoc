= ``php-appveyor.psm1``
:doctype: article
:reproducible:
:source-highlighter: prettify

Install PHP and its tooling on AppVeyor CI.

``php-appveyor.psm1`` is a small PowerShell script which provides functions to install stable PHP versions, PHP DevPack, PHP SDK binary tools and doing some usual provision tasks on the AppVeyor CI.

== Usage

Add the following to your ``.appveyor.yml``:

[source,yml]
----
environment:
  matrix:

    - PHP_VERSION: 7.3 # <1>
      VC_VERSION: 15
      BUILD_TYPE: nts-Win32
      APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2015

  PHP_SDK_VERSION: 2.1.9 # <2>

cache:
  - 'C:\Downloads -> .appveyor.yml' # <3>

platform:
  - x64 # <4>

install:
  - ps: Import-Module .\php-appveyor.psm1
  - ps: InstallPhpSdk     $Env:PHP_SDK_VERSION $Env:VC_VERSION $Env:PLATFORM
  - ps: InstallPhp        $Env:PHP_VERSION $Env:BUILD_TYPE $Env:VC_VERSION $Env:PLATFORM
  - ps: InstallPhpDevPack $Env:PHP_VERSION $Env:BUILD_TYPE $Env:VC_VERSION $Env:PLATFORM
----
<1> Specify buld matrix for your app. Use this matrix item as an example
<2> Specify required PHP SDK binary tools if you need SDK
<3> The ``C:\Downloads`` directory will be used as a storage for downloaded archives. So you may want to cache it
<4> Specify required architecture. Supported architectures are ``x86`` and ``x64``

== License

``php-appveyor.psm1`` is open source software licensed under the MIT License (MIT).
See the https://github.com/sergeyklay/php-appveyor/blob/master/LICENSE[LICENSE] file for more information.
